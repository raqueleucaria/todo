<div id="<%= dom_id subtask %>" class="flex items-center justify-between group/subtask py-2 px-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
  <div class="flex items-center flex-grow">
    <%= form_with(model: subtask, class: "flex items-center") do |form| %>
      <%= form.check_box :completed,
                         data: { id: subtask.id, action: "tasks#toggle" },
                         class: "mr-3 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2 transition-colors" %>
    <% end %>
    
    <div data-controller="inline-edit" 
         data-inline-edit-task-id-value="<%= subtask.id %>"
         class="flex-grow">
      <span data-inline-edit-target="text"
            data-action="click->inline-edit#startEdit"
            class="text-sm <%= 'line-through text-gray-500' if subtask.completed? %> <%= 'text-gray-700' unless subtask.completed? %> transition-colors cursor-pointer hover:bg-gray-200 px-2 py-1 rounded">
        <%= subtask.description %>
      </span>
      
      <input data-inline-edit-target="input"
             data-action="keydown->inline-edit#handleKeydown blur->inline-edit#handleBlur"
             type="text"
             class="hidden text-sm px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full"
             placeholder="Digite o nome da subtarefa...">
    </div>
  </div>
  
  <div class="flex items-center gap-1 opacity-0 group-hover/subtask:opacity-100 transition-opacity duration-200">
    <%= button_to task_path(subtask), 
        method: :delete, 
        class: "p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors duration-200",
        title: "Remover subtarefa",
        data: { confirm: "Tem certeza que deseja remover esta subtarefa?" } do %>
      <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
      </svg>
    <% end %>
  </div>
</div>